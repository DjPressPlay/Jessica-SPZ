<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jessica-SPZ Preview</title>
<style>
  :root{
    --bg:#0b1219; --white:#ffffff; --ink:#0a0f14; --muted:#5f7387;
    --line:#102534; --glow1:#00f0ff; --iris:#7b2ff7; --glow2:#00ff88;
    --accent:#70ffe0; --ok:#66ff99;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:#fff; font:14px/1.5 system-ui,Segoe UI,Roboto,Inter,Arial;
    background:
      linear-gradient(180deg, rgba(0,0,0,.45), transparent 35%),
      radial-gradient(1200px 800px at 50% -10%, #0e1824 0%, var(--bg) 60%),
      #0a0f14;
  }

  /* Subtle checkerboard overlay */
  .stage{
    min-height:100vh; display:flex; align-items:center; justify-content:center; padding:28px 14px;
    background-image:
      linear-gradient(45deg, rgba(255,255,255,.04) 25%, transparent 25%, transparent 75%, rgba(255,255,255,.04) 75%, rgba(255,255,255,.04)),
      linear-gradient(45deg, rgba(255,255,255,.04) 25%, transparent 25%, transparent 75%, rgba(255,255,255,.04) 75%, rgba(255,255,255,.04));
    background-size: 26px 26px;
    background-position: 0 0, 13px 13px;
  }

  /* Iridescent animation */
  @keyframes iridescentMove{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
  }

  /* Holo glow “iframe” shell */
  .iframe-shell{
    width:min(980px, 96vw);
    border-radius:22px; padding:12px; position:relative;
    background: rgba(0,0,0,.35);
    box-shadow: 0 22px 60px rgba(0,0,0,.5);
    border:2px solid transparent; background-clip:padding-box;
  }
  .iframe-shell::before{
    content:""; position:absolute; inset:-2px; border-radius:24px; padding:2px;
    background: linear-gradient(135deg, var(--glow1), var(--iris), var(--glow2));
    background-size:300% 300%; animation: iridescentMove 8s ease infinite;
    -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none;
  }

  /* White embossed paper container */
  .paper{
    border-radius:16px; overflow:hidden; background: var(--white); color: var(--ink);
    border:1px solid #e8eef6;
    box-shadow:
      inset 0 2px 0 rgba(255,255,255,.9),
      inset 0 -2px 0 rgba(0,0,0,.04),
      0 1px 0 rgba(0,0,0,.08),
      0 12px 28px rgba(0,0,0,.25);
  }

  .wrap{max-width:900px;margin:auto;padding:22px}

  /* Heading / hero */
  .hero{text-align:center; display:grid; gap:10px}
  .img-wrap{border-radius:16px; position:relative; border:2px solid transparent; background-clip:padding-box;}
  .img-wrap::before{
    content:""; position:absolute; inset:-2px; border-radius:18px; padding:2px;
    background: linear-gradient(135deg, var(--glow1), var(--iris), var(--glow2));
    background-size:300% 300%; animation: iridescentMove 10s ease infinite;
    -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none; opacity:.9;
  }
  .hero img{width:100%;max-height:360px;object-fit:cover;border-radius:14px;display:block;border:1px solid rgba(0,0,0,.06)}
  h1{
    margin:8px 0 0; font-size:22px; letter-spacing:.25px; text-transform:uppercase;
    background:linear-gradient(90deg,var(--glow1),var(--iris),var(--glow2));
    -webkit-background-clip:text; background-clip:text; color:transparent;
    filter: drop-shadow(0 1px 8px rgba(0,255,200,.12));
  }
  .muted{color:#6b7f94}

  .cta a{
    display:inline-block; padding:10px 14px; border-radius:999px; text-decoration:none; font-weight:800;
    color:#001b1f; background:linear-gradient(90deg,var(--glow1),var(--iris),var(--glow2));
    border:0; box-shadow:0 8px 24px rgba(0,255,200,.18);
  }

  /* Sections */
  .section{
    margin-top:16px; border-radius:14px; padding:12px;
    background:#f7fbff; border:1px solid #e3edf7;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.9), inset 0 -1px 0 rgba(0,0,0,.03);
  }
  .section .title{
    text-align:center; color:#5a6b7a; font-weight:800; letter-spacing:.2px; margin-bottom:10px; text-transform:uppercase;
  }

  /* Products grid */
  .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}
  .prod{
    position:relative; border-radius:12px; padding:10px; background:#0f1620; color:#eaf5ff;
    display:grid; gap:8px; text-align:center; border:2px solid transparent; background-clip:padding-box;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,.45), 0 12px 26px rgba(0,0,0,.22);
  }
  .prod::before{
    content:""; position:absolute; inset:-2px; border-radius:14px; padding:2px;
    background: linear-gradient(135deg, var(--glow1), var(--iris), var(--glow2));
    background-size:300% 300%; animation: iridescentMove 7s ease infinite;
    -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none;
  }
  .prod img{width:100%;height:120px;object-fit:cover;border-radius:10px;background:#0d1924;display:block;border:1px solid rgba(255,255,255,.06)}
  .prod .name{font-weight:800;letter-spacing:.2px}
  .prod .price{color:var(--ok);font-weight:800}
  .prod a{color:var(--accent);text-decoration:none;font-weight:800}

  /* Articles */
  .articles{display:grid; gap:10px}
  .article{
    background:#0f1620; color:#eaf5ff; padding:12px; border-radius:12px; border:1px solid #142131;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,.45), 0 10px 22px rgba(0,0,0,.2);
  }
  .article h3{margin:0 0 6px}

  footer{margin:14px 0 2px;color:#6b7f94;text-align:center;font-size:12px}
</style>
</head>
<body>
  <div class="stage">
    <!-- Glowing iframe-like shell -->
    <div class="iframe-shell">
      <!-- White embossed 3D container -->
      <div class="paper">
        <div class="wrap" id="root">Loading…</div>
      </div>
    </div>
  </div>

<script>
(function(){
  const root = document.getElementById('root');

  function esc(s){ return String(s||"").replace(/[&<>"]/g, c => ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;" }[c])); }
  function b64ToJSON(b64){
    const bin = atob((b64||"").replace(/[^A-Za-z0-9+/=]/g,""));
    const bytes = Uint8Array.from(bin, c => c.charCodeAt(0));
    const text = new TextDecoder().decode(bytes);
    return JSON.parse(text);
  }

  function render(data){
    const hero = data.hero || {};
    const products = Array.isArray(data.products)? data.products : [];
    const articles = Array.isArray(data.articles)? data.articles : [];

    root.innerHTML = `
      <div class="hero">
        ${hero.image ? `<div class="img-wrap"><img src="${esc(hero.image)}" alt=""></div>` : ""}
        <h1>${esc(hero.title || "SporeZ Drop")}</h1>
        ${hero.subtitle ? `<p class="muted">${esc(hero.subtitle)}</p>` : ""}
        ${hero.ctaText ? `<p class="cta"><a href="${esc(hero.ctaLink||"#")}" target="_blank" rel="noopener"> ${esc(hero.ctaText)} </a></p>` : ""}
      </div>

      ${products.length ? `
        <section class="section">
          <div class="title">Products</div>
          <div class="products">
            ${products.map(p=>`
              <div class="prod">
                ${p.image?`<img src="${esc(p.image)}" alt="">`:``}
                <div class="name">${esc(p.name||"")}</div>
                <div class="price">${esc(p.price||"")}</div>
                ${p.description?`<div class="muted" style="color:#b7cbe0">${esc(p.description)}</div>`:""}
                ${p.link?`<div><a href="${esc(p.link)}" target="_blank" rel="noopener">View</a></div>`:""}
              </div>
            `).join("")}
          </div>
        </section>` : ""}

      ${articles.length ? `
        <section class="section" style="margin-top:18px">
          <div class="title">Info</div>
          <div class="articles">
            ${articles.map(a=>`
              <article class="article">
                <h3>${esc(a.heading||"")}</h3>
                <div>${esc(a.content||"")}</div>
              </article>
            `).join("")}
          </div>
        </section>` : ""}

      <footer>SporeZ • Jessica-SPZ ${data.slug? "• "+esc(data.slug): ""}</footer>
    `;
  }

  try {
    const b64 = (location.hash || "").replace(/^#j=/, "");
    if (!b64) { root.textContent = "No preview data provided."; return; }
    const data = b64ToJSON(b64);
    render(data);
  } catch (e) {
    root.textContent = "Failed to load preview: " + (e && e.message ? e.message : e);
  }
})();
</script>
</body>
</html>
